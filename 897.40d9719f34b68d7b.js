"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[897],{897:(X,u,s)=>{s.r(u),s.d(u,{ViewEntriesPageModule:()=>S});var g=s(177),y=s(4341),r=s(3819),f=s(9858),v=s(8581),e=s(4438),m=s(7225),h=s(2038),E=s(4988),F=s(9385);let C=(()=>{var t;class a{transform(o,i=0,l="down"){return("down"===l?Math.floor:Math.ceil)(o*10**i)/10**i}}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275pipe=e.EJ8({name:"toFixed",type:t,pure:!0}),a})();function w(t,a){if(1&t){const n=e.RV6();e.j41(0,"ion-button",6),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.incrementPage(-1))}),e.nrm(1,"ion-icon",7),e.k0s()}}function j(t,a){if(1&t){const n=e.RV6();e.j41(0,"ion-button",6),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.incrementPage(1))}),e.nrm(1,"ion-icon",8),e.k0s()}}function I(t,a){if(1&t&&(e.j41(0,"ion-toolbar")(1,"ion-row",1)(2,"ion-col",2),e.DNE(3,w,2,0,"ion-button",3),e.k0s(),e.j41(4,"ion-col",4)(5,"p"),e.EFF(6),e.nI1(7,"toFixed"),e.k0s()(),e.j41(8,"ion-col",5),e.DNE(9,j,2,0,"ion-button",3),e.k0s()()()),2&t){let n;const o=e.XpG();e.R7$(3),e.Y8G("ngIf",o.pageable.page-1>0),e.R7$(3),e.Lme("page ",o.pageable.page," of ",e.brH(7,4,o.pageable.totalElements?o.pageable.totalElements/o.pageable.size:o.pageable.page,0,"up"),""),e.R7$(3),e.Y8G("ngIf",(null!==(n=o.pageable.totalElements)&&void 0!==n?n:o.pageable.size)>o.pageable.page*o.pageable.size)}}let k=(()=>{var t;class a{constructor(){this.pageableChange=new e.bkB,this.onPageChanged=new e.bkB}ngOnInit(){}incrementPage(o){this.pageable.page+=o,this.pageableChange.emit(this.pageable),this.onPageChanged.emit(this.pageable)}}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-paging"]],inputs:{pageable:"pageable"},outputs:{pageableChange:"pageableChange",onPageChanged:"onPageChanged"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex","justify-content-between"],[1,"flex","justify-content-start"],["fill","clear",3,"click",4,"ngIf"],[1,"flex","justify-content-center"],[1,"flex","justify-content-end"],["fill","clear",3,"click"],["color","medium","slot","icon-only","name","chevron-back"],["color","medium","slot","icon-only","name","chevron-forward"]],template:function(o,i){1&o&&e.DNE(0,I,10,8,"ion-toolbar",0),2&o&&e.Y8G("ngIf",i.pageable)},dependencies:[g.bT,r.Jm,r.hU,r.iq,r.ln,r.ai,C]}),a})(),R=(()=>{var t;class a{transform(o,i){return 0===i?0:o/i}}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275pipe=e.EJ8({name:"fractionOf",type:t,pure:!0}),a})(),T=(()=>{var t;class a{transform(o,i){return 0===i?0:Math.round(o/i*100)}}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275pipe=e.EJ8({name:"percentOf",type:t,pure:!0}),a})();const V=t=>({above:t});function x(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.changeMode())}),e.j41(1,"span",2)(2,"small"),e.EFF(3),e.k0s()(),e.nrm(4,"ion-progress-bar",3),e.nI1(5,"fractionOf"),e.nI1(6,"fractionOf"),e.j41(7,"div",4)(8,"p",5),e.EFF(9),e.k0s(),e.j41(10,"p",6),e.EFF(11),e.nI1(12,"percentOf"),e.k0s(),e.j41(13,"p",7),e.EFF(14),e.k0s()()()}if(2&t){const n=e.XpG();e.Y8G("ngClass",e.eq3(17,V,n.total>n.target)),e.R7$(3),e.JRh(n.mode),e.R7$(),e.Y8G("value",n.total>n.target?e.i5U(5,8,n.target,n.total):e.i5U(6,11,n.total,n.target)),e.R7$(5),e.Lme("",n.total>n.target?"goal":"total "," ",n.total>n.target?n.target:n.total,"g"),e.R7$(2),e.JRh(n.total>n.target?n.total-n.target+"g exceeded":e.i5U(12,14,n.total,n.target)+"%"),e.R7$(3),e.Lme("",n.total>n.target?"total":"goal "," ",n.total>n.target?n.total:n.target,"g")}}let D=(()=>{var t;class a{constructor(o,i){this.foodLogService=o,this.loadingService=i,this.total=0,this.onTotalChange=new e.bkB,this.modes=["day","week","month"],this.mode="day"}ngOnInit(){this.setup()}setup(){this.getCarbGoal()}getCarbGoal(){this.loadingService.addToQueue(this.foodLogService.getDailyCarbGoal().then(o=>{switch(this.mode){case"day":this.target=o;break;case"week":this.target=7*o;break;case"month":this.target=7*o*4}}))}changeMode(){let o=this.modes.indexOf(this.mode);o=(o+1)%this.modes.length,this.mode=this.modes[o],this.setup()}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(m.i),e.rXU(h.U))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-progress-display"]],inputs:{total:"total"},outputs:{onTotalChange:"onTotalChange"},decls:1,vars:1,consts:[["class","mx-2 carb-goal-progress",3,"ngClass","click",4,"ngIf"],[1,"mx-2","carb-goal-progress",3,"click","ngClass"],[1,"flex","justify-content-center"],[3,"value"],[1,"flex","justify-content-between","above"],[1,"my-1","carb-progress-value-text"],[1,"my-1"],[1,"my-1","carb-progress-target-text"]],template:function(o,i){1&o&&e.DNE(0,x,15,19,"div",0),2&o&&e.Y8G("ngIf",i.target)},dependencies:[g.YU,g.bT,r.FH,R,T]}),a})();var O=s(9715);let $=(()=>{var t;class a{constructor(o){this.datePipe=o}transform(o,i="EE",l="dd",c="MMM, hh:mm a"){const b=this.datePipe.transform(o,c),_=this.datePipe.transform(o,l);if(!_||!b)return"";const p=parseInt(_,10);let d="th";p%10==1&&11!==p?d="st":p%10==2&&12!==p?d="nd":p%10==3&&13!==p&&(d="rd");const P=this.datePipe.transform(o,i);return P?`${P} ${p}${d} ${b}`:""}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(g.vh,16))},t.\u0275pipe=e.EJ8({name:"ordinalDate",type:t,pure:!0}),a})();function G(t,a){if(1&t&&(e.j41(0,"ion-row")(1,"ion-card-subtitle")(2,"strong"),e.EFF(3),e.k0s()()()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(n.note)}}function M(t,a){if(1&t&&(e.j41(0,"ion-card",19)(1,"ion-card-content",20),e.nrm(2,"app-portion",21),e.k0s()()),2&t){const n=a.$implicit;e.R7$(2),e.Y8G("portionId",n)("allowDBDeletion",!1)("allowEdit",!1)}}function U(t,a){if(1&t){const n=e.RV6();e.j41(0,"ion-card",7)(1,"ion-card-header",8),e.DNE(2,G,4,1,"ion-row",9),e.j41(3,"ion-row")(4,"ion-card-subtitle"),e.EFF(5),e.nI1(6,"ordinalDate"),e.k0s()(),e.j41(7,"ion-row")(8,"ion-card-title"),e.EFF(9),e.k0s()()(),e.j41(10,"ion-card-content")(11,"ion-row")(12,"h1"),e.EFF(13),e.k0s()(),e.j41(14,"ion-row")(15,"ion-accordion-group",10)(16,"ion-accordion",11)(17,"ion-item",12)(18,"ion-card-subtitle"),e.EFF(19),e.k0s()(),e.j41(20,"div",13),e.DNE(21,M,3,3,"ion-card",14),e.k0s()()()(),e.j41(22,"ion-row")(23,"ion-col",15)(24,"div",16)(25,"ion-button",17),e.bIt("click",function(){const i=e.eBV(n).$implicit,l=e.XpG();return e.Njj(l.deleteEntry(i))}),e.nrm(26,"ion-icon",18),e.k0s()()()()()()}if(2&t){const n=a.$implicit;e.R7$(2),e.Y8G("ngIf",n.note),e.R7$(3),e.JRh(e.bMT(6,7,n.date)),e.R7$(4),e.JRh(n.name),e.R7$(4),e.SpI("Carbs: ",n.carbs,"g"),e.R7$(6),e.Lme("",n.portionIds.length," portion",n.portionIds.length>1?"s":"",""),e.R7$(2),e.Y8G("ngForOf",n.portionIds)}}const L=[{path:"",component:(()=>{var t;class a{constructor(o,i,l){this.foodLogService=o,this.loadingService=i,this.alertService=l,this.pageable={page:1,size:5}}ngOnInit(){this.loadFoodLogs()}loadFoodLogs(){this.loadingService.addToQueue(this.foodLogService.getAllOrderedByIndexPaged(v.$I.FOOD_LOG_TBL_DATE,this.pageable,"desc").then(o=>{this.foodLogs=o}))}pageChanged(o){this.loadFoodLogs()}deleteEntry(o){this.alertService.promptConfirmation("Confirm","are you sure you want to delete this entry?","no","yes").then(i=>{i&&this.loadingService.addToQueue(this.foodLogService.deleteEntityFromDB(o.id).then(()=>{this.pageChanged(this.pageable)}))})}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(m.i),e.rXU(h.U),e.rXU(E.u))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-entries"]],decls:13,vars:8,consts:[[3,"translucent"],["slot","start"],["size","large"],[3,"fullscreen"],["class","no-padding-card",4,"ngFor","ngForOf"],[3,"total"],[3,"pageableChange","onPageChanged","pageable"],[1,"no-padding-card"],["mode","ios"],[4,"ngIf"],[1,"w-full"],["value","first"],["slot","header"],["slot","content"],["class","portion-card",4,"ngFor","ngForOf"],[1,"flex","justify-content-start"],[1,"flex","align-items-start"],["item-start","","fill","clear","color","danger",3,"click"],["slot","icon-only","name","trash"],[1,"portion-card"],[1,"no-padding"],[3,"portionId","allowDBDeletion","allowEdit"]],template:function(o,i){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title",2),e.EFF(5,"Entries"),e.k0s()()(),e.j41(6,"ion-content",3),e.DNE(7,U,27,9,"ion-card",4),e.k0s(),e.j41(8,"ion-footer")(9,"ion-toolbar"),e.nrm(10,"app-progress-display",5),e.nI1(11,"sumProperty"),e.j41(12,"app-paging",6),e.mxI("pageableChange",function(c){return e.DH7(i.pageable,c)||(i.pageable=c),c}),e.bIt("onPageChanged",function(c){return i.pageChanged(c)}),e.k0s()()()),2&o&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngForOf",i.foodLogs),e.R7$(3),e.Y8G("total",e.i5U(11,5,i.foodLogs,"carbs")),e.R7$(2),e.R50("pageable",i.pageable))},dependencies:[g.Sq,g.bT,r.xk,r.YH,r.Jm,r.QW,r.b_,r.I9,r.ME,r.HW,r.tN,r.hU,r.W9,r.M0,r.eU,r.iq,r.uz,r.MC,r.ln,r.BC,r.ai,F.x,k,D,O.$,$]}),a})()}];let Y=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[f.iI.forChild(L),f.iI]}),a})();var B=s(1815),N=s(4683);let S=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,y.YN,r.bv,Y,B.U,N.Y]}),a})()}}]);