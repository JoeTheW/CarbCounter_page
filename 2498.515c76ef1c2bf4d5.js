"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2498],{7225:(ne,I,f)=>{f.d(I,{i:()=>V});var m=f(467),L=f(8581),p=f(9275),S=f(1799),v=f(4438),a=f(2038);let V=(()=>{var E;class M extends p.y{constructor(w,D,A){super(w,D),this.databaseService=w,this.loadingService=D,this.systemService=A,this.carbTotal=134,this.carbGoal=250}deleteDefaultData(){return new Promise(w=>w())}setupTableData(){this.tableName=L.jj.FOOD_LOG}setupDefaultData(w){var D=this;return(0,m.A)(function*(){return D.dataReady.next(!0),new Promise(A=>A())})()}getDailyCarbGoal(){return new Promise(w=>{this.systemService.getConfigValue(S.c.DAILY_CARB_GOAL).then(D=>{if(null!=D)return w(D);{let A=250;return this.systemService.setConfigValue(S.c.DAILY_CARB_GOAL,A),w(A)}})})}setDailyCarbGoal(w){this.systemService.setConfigValue(S.c.DAILY_CARB_GOAL,w)}}return(E=M).\u0275fac=function(w){return new(w||E)(v.KVO(L.BP),v.KVO(a.U),v.KVO(S.V))},E.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"}),M})()},2498:(ne,I,f)=>{f.r(I),f.d(I,{SettingsPageModule:()=>n});var m=f(177),L=f(4341),p=f(3819),S=f(9858),v=f(7144),a=f(4438),V=f(1799),E=f(529),M=f(8581),X=f(4988),w=f(2038),D=f(4569),A=f(5293),K=f(7225),h=f(467),j=f(7464),U=function(t){return t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS",t}(U||{}),z=function(t){return t.Rear="REAR",t.Front="FRONT",t}(z||{}),Y=function(t){return t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl",t}(Y||{});class J extends j.E_{getPhoto(i){var l=this;return(0,h.A)(function*(){return new Promise(function(){var e=(0,h.A)(function*(r,o){if(i.webUseInput||i.source===U.Photos)l.fileInputExperience(i,r,o);else if(i.source===U.Prompt){let s=document.querySelector("pwa-action-sheet");s||(s=document.createElement("pwa-action-sheet"),document.body.appendChild(s)),s.header=i.promptLabelHeader||"Photo",s.cancelable=!1,s.options=[{title:i.promptLabelPhoto||"From Photos"},{title:i.promptLabelPicture||"Take Picture"}],s.addEventListener("onSelection",function(){var c=(0,h.A)(function*(d){0===d.detail?l.fileInputExperience(i,r,o):l.cameraExperience(i,r,o)});return function(d){return c.apply(this,arguments)}}())}else l.cameraExperience(i,r,o)});return function(r,o){return e.apply(this,arguments)}}())})()}pickImages(i){var l=this;return(0,h.A)(function*(){return new Promise(function(){var e=(0,h.A)(function*(r,o){l.multipleFileInputExperience(r,o)});return function(r,o){return e.apply(this,arguments)}}())})()}cameraExperience(i,l,e){var r=this;return(0,h.A)(function*(){if(customElements.get("pwa-camera-modal")){const o=document.createElement("pwa-camera-modal");o.facingMode=i.direction===z.Front?"user":"environment",document.body.appendChild(o);try{yield o.componentOnReady(),o.addEventListener("onPhoto",function(){var s=(0,h.A)(function*(c){const d=c.detail;null===d?e(new j.I9("User cancelled photos app")):d instanceof Error?e(d):l(yield r._getCameraPhoto(d,i)),o.dismiss(),document.body.removeChild(o)});return function(c){return s.apply(this,arguments)}}()),o.present()}catch{r.fileInputExperience(i,l,e)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),r.fileInputExperience(i,l,e)})()}fileInputExperience(i,l,e){let r=document.querySelector("#_capacitor-camera-input");const o=()=>{var s;null===(s=r.parentNode)||void 0===s||s.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",s=>{const c=r.files[0];let d="jpeg";if("image/png"===c.type?d="png":"image/gif"===c.type&&(d="gif"),"dataUrl"===i.resultType||"base64"===i.resultType){const g=new FileReader;g.addEventListener("load",()=>{if("dataUrl"===i.resultType)l({dataUrl:g.result,format:d});else if("base64"===i.resultType){const _=g.result.split(",")[1];l({base64String:_,format:d})}o()}),g.readAsDataURL(c)}else l({webPath:URL.createObjectURL(c),format:d}),o()}),r.addEventListener("cancel",s=>{e(new j.I9("User cancelled photos app")),o()})),r.accept="image/*",r.capture=!0,i.source===U.Photos||i.source===U.Prompt?r.removeAttribute("capture"):i.direction===z.Front?r.capture="user":i.direction===z.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(i,l){let e=document.querySelector("#_capacitor-camera-input-multiple");const r=()=>{var o;null===(o=e.parentNode)||void 0===o||o.removeChild(e)};e||(e=document.createElement("input"),e.id="_capacitor-camera-input-multiple",e.type="file",e.hidden=!0,e.multiple=!0,document.body.appendChild(e),e.addEventListener("change",o=>{const s=[];for(let c=0;c<e.files.length;c++){const d=e.files[c];let g="jpeg";"image/png"===d.type?g="png":"image/gif"===d.type&&(g="gif"),s.push({webPath:URL.createObjectURL(d),format:g})}i({photos:s}),r()}),e.addEventListener("cancel",o=>{l(new j.I9("User cancelled photos app")),r()})),e.accept="image/*",e.click()}_getCameraPhoto(i,l){return new Promise((e,r)=>{const o=new FileReader,s=i.type.split("/")[1];"uri"===l.resultType?e({webPath:URL.createObjectURL(i),format:s,saved:!1}):(o.readAsDataURL(i),o.onloadend=()=>{const c=o.result;e("dataUrl"===l.resultType?{dataUrl:c,format:s,saved:!1}:{base64String:c.split(",")[1],format:s,saved:!1})},o.onerror=c=>{r(c)})})}checkPermissions(){var i=this;return(0,h.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw i.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw i.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var i=this;return(0,h.A)(function*(){throw i.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var i=this;return(0,h.A)(function*(){throw i.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var i=this;return(0,h.A)(function*(){throw i.unavailable("Not implemented on web.")})()}}new J;const le=(0,j.F3)("Camera",{web:()=>new J});var Q=f(1889);const Z=(0,j.F3)("Filesystem",{web:()=>f.e(2937).then(f.bind(f,2937)).then(t=>new t.FilesystemWeb)});let re=(()=>{var t;class i{constructor(){this.photoDirectory="photos"}requestPhoto(){var e=this;return(0,h.A)(function*(){try{const r=yield e.takePhoto(),o=Date.now()+".jpeg",s=yield e.resizePhotoReturningBase64(r,o);return yield e.savePhoto(r,o,s)}catch(r){return void console.error("Error occurred while processing photo:",r)}})()}takePhoto(){return(0,h.A)(function*(){return yield le.getPhoto({quality:1,allowEditing:!1,resultType:Y.Uri,source:U.Prompt})})()}resizePhotoReturningBase64(e,r){var o=this;return(0,h.A)(function*(){return new Promise(function(){var s=(0,h.A)(function*(c){const d=yield o.base64FromPath(e.webPath);return c(yield o.compressBase64(d))});return function(c){return s.apply(this,arguments)}}())})()}savePhoto(e,r,o){return(0,h.A)(function*(){const s={path:r,data:o,directory:Q.__.Data},c=yield Z.writeFile(s);return{filepath:r,savedUri:c.uri}})()}compressBase64(e){var r=this;return(0,h.A)(function*(){const s=yield r.Base64ToBlob(e);console.log("Precompress",r.formatBytes(s.size,2));let c=s,d=0;for(;d<15&&null!=c&&c.size>157286.4;)c=yield r.compressBlob(c),console.log("Compressed",r.formatBytes(c.size,2)),d++;return console.log("Final compression",r.formatBytes(c.size,2)),yield r.blobToBase64(c)})()}compressBlob(e){return(0,h.A)(function*(){const s=new Image,c=new Promise((R,N)=>{s.onload=()=>R(),s.onerror=x=>N(x)});s.src=URL.createObjectURL(e),yield c;let d=s.width,g=s.height;if(d>800||g>600){const R=d/g;d>g?(d=800,g=Math.round(d/R)):(g=600,d=Math.round(g*R))}const _=document.createElement("canvas");return _.width=d,_.height=g,_.getContext("2d").drawImage(s,0,0,d,g),new Promise((R,N)=>{_.toBlob(x=>{x?R(x):N(new Error("Failed to compress image."))},"image/jpeg",.9)})})()}blobToBase64(e){return(0,h.A)(function*(){return new Promise((r,o)=>{const s=new FileReader;s.onload=()=>{r(s.result.split(",")[1])},s.onerror=c=>{o(c)},s.readAsDataURL(e)})})()}base64FromPath(e){return(0,h.A)(function*(){const o=yield(yield fetch(e)).blob();return new Promise((s,c)=>{const d=new FileReader;d.onerror=c,d.onload=()=>{"string"==typeof d.result?s(d.result):c("method did not return a string")},d.readAsDataURL(o)})})()}readFileFromPath(e){return(0,h.A)(function*(){return yield Z.readFile({path:e,directory:Q.__.Data})})()}BlobToDataUrl(e){return(0,h.A)(function*(){return new Promise((r,o)=>{const s=new FileReader;s.onerror=o,s.onload=c=>r(c.target.result),s.readAsDataURL(e)})})()}Base64ToBlob(e){return(0,h.A)(function*(){return(yield fetch(e)).blob()})()}Base64ToFile({data:e="",type:r="",name:o=""}){return(0,h.A)(function*(){const s=yield(yield fetch(e)).blob();return new File([s],o,{type:r})})()}formatBytes(e,r=2){if(!+e)return"0 Bytes";const s=r<0?0:r,d=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,d)).toFixed(s))} ${["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][d]}`}}return(t=i).\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),i})();var q=f(345);const ue=[{path:"",component:(()=>{var t;class i{constructor(e,r,o,s,c,d,g,_,ee,R){this.systemService=e,this.messageService=r,this.databaseService=o,this.alertService=s,this.loadingService=c,this.catalogService=d,this.portionService=g,this.foodLogService=_,this.imageService=ee,this._sanitizer=R,this.properties={appVersion:v.c.version,dbVersion:v.c.dbVersion},this.settings={carbGoal:0},this.imagePath=""}ngOnInit(){this.setup()}setup(){this.getCarbGoal()}toggleChange(e){this.systemService.toggleChange(e),this.messageService.display("Dark mode changed",3,"middle")}deleteDefaultData(){this.alertService.promptConfirmation("Confirm","are you sure you want to delete built-in app data?","no","yes").then(e=>{e&&this.databaseService.triggerDeleteDefaultData()})}restoreDefaultData(){this.alertService.promptConfirmation("Confirm","are you sure you want to restore default data back to initial app state?","no","yes").then(e=>{e&&this.databaseService.triggerRestoreDefaultData()})}getCarbGoal(){this.loadingService.addToQueue(this.foodLogService.getDailyCarbGoal().then(e=>{this.settings.carbGoal=e}))}setCarbGoal(){null!=this.settings.carbGoal&&this.settings.carbGoal>0&&this.foodLogService.setDailyCarbGoal(this.settings.carbGoal)}takePhoto(){this.imageService.requestPhoto().then(e=>{e?(console.log(e),this.imageService.readFileFromPath(e.filepath).then(r=>{console.log(r),this.imagePath=`data:image/jpeg;base64,${r.data}`})):this.alertService.simpleError("Error during image upload")})}}return(t=i).\u0275fac=function(e){return new(e||t)(a.rXU(V.V),a.rXU(E.b),a.rXU(M.BP),a.rXU(X.u),a.rXU(w.U),a.rXU(D.H),a.rXU(A.t),a.rXU(K.i),a.rXU(re),a.rXU(q.up))},t.\u0275cmp=a.VBU({type:t,selectors:[["app-settings"]],decls:45,vars:10,consts:[[3,"translucent"],["slot","start"],["size","large"],[3,"fullscreen"],[3,"inset"],["justify","space-between",3,"ngModelChange","ionChange","ngModel"],["color","danger",3,"click"],["slot","icon-only","name","trash"],["color","warning",3,"click"],["slot","icon-only","name","refresh"],["label","Daily carb goal","labelPlacement","stacked","helperText","Roughly 1/8th of your daily calorie goal","type","number",3,"ngModelChange","ionChange","ngModel"],[3,"click"],[3,"src"]],template:function(e,r){1&e&&(a.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),a.nrm(3,"ion-menu-button"),a.k0s(),a.j41(4,"ion-title",2),a.EFF(5,"Settings"),a.k0s()()(),a.j41(6,"ion-content",3)(7,"ion-list-header"),a.EFF(8,"Appearance"),a.k0s(),a.j41(9,"ion-list",4)(10,"ion-item")(11,"ion-toggle",5),a.mxI("ngModelChange",function(s){return a.DH7(r.systemService.darkModeToggle,s)||(r.systemService.darkModeToggle=s),s}),a.bIt("ionChange",function(s){return r.toggleChange(s)}),a.EFF(12,"Dark Mode"),a.k0s()()(),a.j41(13,"ion-list-header"),a.EFF(14,"Data"),a.k0s(),a.j41(15,"ion-list",4)(16,"ion-item")(17,"ion-label"),a.EFF(18," Delete default data "),a.j41(19,"p"),a.EFF(20,"deletes built-in data from app (including changes you have made)"),a.k0s()(),a.j41(21,"ion-button",6),a.bIt("click",function(){return r.deleteDefaultData()}),a.nrm(22,"ion-icon",7),a.k0s()(),a.j41(23,"ion-item")(24,"ion-label"),a.EFF(25," Restore default data "),a.j41(26,"p"),a.EFF(27,"restores built-in data to original app state"),a.k0s()(),a.j41(28,"ion-button",8),a.bIt("click",function(){return r.restoreDefaultData()}),a.nrm(29,"ion-icon",9),a.k0s()()(),a.j41(30,"ion-list-header"),a.EFF(31,"Personal"),a.k0s(),a.j41(32,"ion-list",4)(33,"ion-item")(34,"ion-input",10),a.mxI("ngModelChange",function(s){return a.DH7(r.settings.carbGoal,s)||(r.settings.carbGoal=s),s}),a.bIt("ionChange",function(){return r.setCarbGoal()}),a.k0s()()(),a.j41(35,"ion-button",11),a.bIt("click",function(){return r.takePhoto()}),a.EFF(36,"Take photo"),a.k0s(),a.nrm(37,"img",12),a.k0s(),a.j41(38,"ion-footer")(39,"ion-toolbar")(40,"ion-note"),a.EFF(41),a.k0s(),a.nrm(42,"br"),a.j41(43,"ion-note"),a.EFF(44),a.k0s()()()),2&e&&(a.Y8G("translucent",!0),a.R7$(6),a.Y8G("fullscreen",!0),a.R7$(3),a.Y8G("inset",!0),a.R7$(2),a.R50("ngModel",r.systemService.darkModeToggle),a.R7$(4),a.Y8G("inset",!0),a.R7$(17),a.Y8G("inset",!0),a.R7$(2),a.R50("ngModel",r.settings.carbGoal),a.R7$(3),a.Y8G("src",r.imagePath,a.B4B),a.R7$(4),a.SpI("app v",r.properties.appVersion,""),a.R7$(3),a.SpI("db v",r.properties.dbVersion,""))},dependencies:[L.BC,L.vS,p.Jm,p.QW,p.W9,p.M0,p.eU,p.iq,p.$w,p.uz,p.he,p.nf,p.AF,p.MC,p.JI,p.BC,p.BY,p.ai,p.hB,p.su]}),i})()}];let u=(()=>{var t;class i{}return(t=i).\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.$C({type:t}),t.\u0275inj=a.G2t({imports:[S.iI.forChild(ue),S.iI]}),i})(),n=(()=>{var t;class i{}return(t=i).\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.$C({type:t}),t.\u0275inj=a.G2t({imports:[m.MD,L.YN,p.bv,u]}),i})()},7464:(ne,I,f)=>{f.d(I,{EA:()=>q,E_:()=>U,F3:()=>K,I9:()=>M});var m=f(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var E=function(u){return u.Unimplemented="UNIMPLEMENTED",u.Unavailable="UNAVAILABLE",u}(E||{});class M extends Error{constructor(n,t,i){super(n),this.message=n,this.code=t,this.data=i}}const w=u=>{var n,t,i,l,e;const r=u.CapacitorCustomPlatform||null,o=u.Capacitor||{},s=o.Plugins=o.Plugins||{},c=u.CapacitorPlatforms,g=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.getPlatform)||(()=>null!==r?r.name:(u=>{var n,t;return null!=u&&u.androidBridge?"android":null!==(t=null===(n=null==u?void 0:u.webkit)||void 0===n?void 0:n.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(u)),ee=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==g()),N=(null===(i=null==c?void 0:c.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(b=>{const P=oe.get(b);return!!(null!=P&&P.platforms.has(g())||de(b))}),de=(null===(l=null==c?void 0:c.currentPlatform)||void 0===l?void 0:l.getPluginHeader)||(b=>{var P;return null===(P=o.PluginHeaders)||void 0===P?void 0:P.find(W=>W.name===b)}),oe=new Map,ve=(null===(e=null==c?void 0:c.currentPlatform)||void 0===e?void 0:e.registerPlugin)||((b,P={})=>{const W=oe.get(b);if(W)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),W.proxy;const G=g(),H=de(b);let B;const be=function(){var y=(0,m.A)(function*(){return!B&&G in P?B=B="function"==typeof P[G]?yield P[G]():P[G]:null!==r&&!B&&"web"in P&&(B=B="function"==typeof P.web?yield P.web():P.web),B});return function(){return y.apply(this,arguments)}}(),ie=y=>{let C;const T=(...O)=>{const k=be().then(F=>{const $=((y,C)=>{var T,O;if(!H){if(y)return null===(O=y[C])||void 0===O?void 0:O.bind(y);throw new M(`"${b}" plugin is not implemented on ${G}`,E.Unimplemented)}{const k=null==H?void 0:H.methods.find(F=>C===F.name);if(k)return"promise"===k.rtype?F=>o.nativePromise(b,C.toString(),F):(F,$)=>o.nativeCallback(b,C.toString(),F,$);if(y)return null===(T=y[C])||void 0===T?void 0:T.bind(y)}})(F,y);if($){const te=$(...O);return C=null==te?void 0:te.remove,te}throw new M(`"${b}.${y}()" is not implemented on ${G}`,E.Unimplemented)});return"addListener"===y&&(k.remove=(0,m.A)(function*(){return C()})),k};return T.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(T,"name",{value:y,writable:!1,configurable:!1}),T},fe=ie("addListener"),ge=ie("removeListener"),ye=(y,C)=>{const T=fe({eventName:y},C),O=function(){var F=(0,m.A)(function*(){const $=yield T;ge({eventName:y,callbackId:$},C)});return function(){return F.apply(this,arguments)}}(),k=new Promise(F=>T.then(()=>F({remove:O})));return k.remove=(0,m.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield O()}),k},ae=new Proxy({},{get(y,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return H?ye:fe;case"removeListener":return ge;default:return ie(C)}}});return s[b]=ae,oe.set(b,{name:b,proxy:ae,platforms:new Set([...Object.keys(P),...H?[G]:[]])}),ae});return o.convertFileSrc||(o.convertFileSrc=b=>b),o.getPlatform=g,o.handleError=b=>u.console.error(b),o.isNativePlatform=ee,o.isPluginAvailable=N,o.pluginMethodNoop=(b,P,W)=>Promise.reject(`${W} does not have an implementation of "${P}".`),o.registerPlugin=ve,o.Exception=M,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},A=(u=>u.Capacitor=w(u))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),K=A.registerPlugin;class U{constructor(n){this.listeners={},this.retainedEventArguments={},this.windowListeners={},n&&(console.warn(`Capacitor WebPlugin "${n.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=n)}addListener(n,t){var i=this;let l=!1;this.listeners[n]||(this.listeners[n]=[],l=!0),this.listeners[n].push(t);const r=this.windowListeners[n];r&&!r.registered&&this.addWindowListener(r),l&&this.sendRetainedArgumentsForEvent(n);const o=function(){var c=(0,m.A)(function*(){return i.removeListener(n,t)});return function(){return c.apply(this,arguments)}}();return Promise.resolve({remove:o})}removeAllListeners(){var n=this;return(0,m.A)(function*(){n.listeners={};for(const t in n.windowListeners)n.removeWindowListener(n.windowListeners[t]);n.windowListeners={}})()}notifyListeners(n,t,i){const l=this.listeners[n];if(l)l.forEach(e=>e(t));else if(i){let e=this.retainedEventArguments[n];e||(e=[]),e.push(t),this.retainedEventArguments[n]=e}}hasListeners(n){return!!this.listeners[n].length}registerWindowListener(n,t){this.windowListeners[t]={registered:!1,windowEventName:n,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(n="not implemented"){return new A.Exception(n,E.Unimplemented)}unavailable(n="not available"){return new A.Exception(n,E.Unavailable)}removeListener(n,t){var i=this;return(0,m.A)(function*(){const l=i.listeners[n];if(!l)return;const e=l.indexOf(t);i.listeners[n].splice(e,1),i.listeners[n].length||i.removeWindowListener(i.windowListeners[n])})()}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}sendRetainedArgumentsForEvent(n){const t=this.retainedEventArguments[n];t&&(delete this.retainedEventArguments[n],t.forEach(i=>{this.notifyListeners(n,i)}))}}const Y=u=>encodeURIComponent(u).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),J=u=>u.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class se extends U{getCookies(){return(0,m.A)(function*(){const n=document.cookie,t={};return n.split(";").forEach(i=>{if(i.length<=0)return;let[l,e]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=J(l).trim(),e=J(e).trim(),t[l]=e}),t})()}setCookie(n){return(0,m.A)(function*(){try{const t=Y(n.key),i=Y(n.value),l=`; expires=${(n.expires||"").replace("expires=","")}`,e=(n.path||"/").replace("path=",""),r=null!=n.url&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${t}=${i||""}${l}; path=${e}; ${r};`}catch(t){return Promise.reject(t)}})()}deleteCookie(n){return(0,m.A)(function*(){try{document.cookie=`${n.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,m.A)(function*(){try{const n=document.cookie.split(";")||[];for(const t of n)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(n){return Promise.reject(n)}})()}clearAllCookies(){var n=this;return(0,m.A)(function*(){try{yield n.clearCookies()}catch(t){return Promise.reject(t)}})()}}K("CapacitorCookies",{web:()=>new se});const Q=function(){var u=(0,m.A)(function*(n){return new Promise((t,i)=>{const l=new FileReader;l.onload=()=>{const e=l.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},l.onerror=e=>i(e),l.readAsDataURL(n)})});return function(t){return u.apply(this,arguments)}}(),q=(u,n={})=>{const t=Object.assign({method:u.method||"GET",headers:u.headers},n),l=((u={})=>{const n=Object.keys(u);return Object.keys(u).map(l=>l.toLocaleLowerCase()).reduce((l,e,r)=>(l[e]=u[n[r]],l),{})})(u.headers)["content-type"]||"";if("string"==typeof u.data)t.body=u.data;else if(l.includes("application/x-www-form-urlencoded")){const e=new URLSearchParams;for(const[r,o]of Object.entries(u.data||{}))e.set(r,o);t.body=e.toString()}else if(l.includes("multipart/form-data")||u.data instanceof FormData){const e=new FormData;if(u.data instanceof FormData)u.data.forEach((o,s)=>{e.append(s,o)});else for(const o of Object.keys(u.data))e.append(o,u.data[o]);t.body=e;const r=new Headers(t.headers);r.delete("content-type"),t.headers=r}else(l.includes("application/json")||"object"==typeof u.data)&&(t.body=JSON.stringify(u.data));return t};class ce extends U{request(n){return(0,m.A)(function*(){const t=q(n,n.webFetchExtra),i=((u,n=!0)=>u?Object.entries(u).reduce((i,l)=>{const[e,r]=l;let o,s;return Array.isArray(r)?(s="",r.forEach(c=>{o=n?encodeURIComponent(c):c,s+=`${e}=${o}&`}),s.slice(0,-1)):(o=n?encodeURIComponent(r):r,s=`${e}=${o}`),`${i}&${s}`},"").substr(1):null)(n.params,n.shouldEncodeUrlParams),l=i?`${n.url}?${i}`:n.url,e=yield fetch(l,t),r=e.headers.get("content-type")||"";let s,c,{responseType:o="text"}=e.ok?n:{};switch(r.includes("application/json")&&(o="json"),o){case"arraybuffer":case"blob":c=yield e.blob(),s=yield Q(c);break;case"json":s=yield e.json();break;default:s=yield e.text()}const d={};return e.headers.forEach((g,_)=>{d[_]=g}),{data:s,headers:d,status:e.status,url:e.url}})()}get(n){var t=this;return(0,m.A)(function*(){return t.request(Object.assign(Object.assign({},n),{method:"GET"}))})()}post(n){var t=this;return(0,m.A)(function*(){return t.request(Object.assign(Object.assign({},n),{method:"POST"}))})()}put(n){var t=this;return(0,m.A)(function*(){return t.request(Object.assign(Object.assign({},n),{method:"PUT"}))})()}patch(n){var t=this;return(0,m.A)(function*(){return t.request(Object.assign(Object.assign({},n),{method:"PATCH"}))})()}delete(n){var t=this;return(0,m.A)(function*(){return t.request(Object.assign(Object.assign({},n),{method:"DELETE"}))})()}}K("CapacitorHttp",{web:()=>new ce})},1889:(ne,I,f)=>{f.d(I,{Wi:()=>L,__:()=>m});var m=function(v){return v.Documents="DOCUMENTS",v.Data="DATA",v.Library="LIBRARY",v.Cache="CACHE",v.External="EXTERNAL",v.ExternalStorage="EXTERNAL_STORAGE",v}(m||{}),L=function(v){return v.UTF8="utf8",v.ASCII="ascii",v.UTF16="utf16",v}(L||{})}}]);